{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "exported_at": "2025-12-07T13:50:33-07:00",
    "name": "Nginx",
    "author": "sinaloensemel@gmail.com",
    "description": "Nginx egg",
    "features": null,
    "docker_images": {
        "Nginx": "ghcr.io\/sinaloense\/pterodactyl-nginx:latest"
    },
    "file_denylist": [],
    "startup": "nginx -p \".\/nginx\" -c \"nginx.conf\" -g \"daemon off;\"",
    "config": {
        "files": "{}",
        "startup": "{\r\n    \"done\": \"start worker process\"\r\n}",
        "logs": "{}",
        "stop": "^C & ^C"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/bash\r\n# Nginx Installation Script\r\n#\r\n\r\napt-get update\r\napt-get install -y nginx\r\n\r\n# Copy Nginx config\r\ncp -afv \/etc\/nginx\/ \/mnt\/server\/\r\nrm -rf \/mnt\/server\/nginx\/sites-enabled\/\r\nmv \/mnt\/server\/nginx\/sites-available\/ \/mnt\/server\/nginx\/sites-enabled\/\r\n\r\n# Create Nginx logs directory\r\nmkdir -p \/mnt\/server\/nginx\/logs\r\n\r\n# Create Nginx tmp directory\r\nmkdir -p \/mnt\/server\/nginx\/tmp\r\n\r\n# Create Nginx ssl directory\r\nmkdir -p \/mnt\/server\/ssl\/certs\r\nmkdir -p \/mnt\/server\/ssl\/private\r\n\r\n# Create html directory\r\nmkdir -p \/mnt\/server\/html\r\n\r\n\r\n\r\n# nginx.conf\r\ncat > \/mnt\/server\/nginx\/nginx.conf << 'EOF'\r\nworker_processes 1;\r\npid \/home\/container\/nginx\/tmp\/nginx.pid;\r\nerror_log \/dev\/stdout info;\r\ninclude \/home\/container\/nginx\/modules-enabled\/*.conf;\r\n\r\nevents {\r\n\tworker_connections 768;\r\n\t# multi_accept on;\r\n}\r\n\r\nhttp {\r\n\t##\r\n\t# Temp Settings\r\n\t##\r\n\tclient_body_temp_path \/home\/container\/nginx\/tmp\/client_body;\r\n    proxy_temp_path       \/home\/container\/nginx\/tmp\/proxy;\r\n    fastcgi_temp_path     \/home\/container\/nginx\/tmp\/fastcgi;\r\n    uwsgi_temp_path       \/home\/container\/nginx\/tmp\/uwsgi;\r\n    scgi_temp_path        \/home\/container\/nginx\/tmp\/scgi;\r\n\r\n    ##\r\n\t# Basic Settings\r\n\t##\r\n\r\n\tsendfile on;\r\n\ttcp_nopush on;\r\n\ttypes_hash_max_size 2048;\r\n\t# server_tokens off;\r\n\r\n\t# server_names_hash_bucket_size 64;\r\n\t# server_name_in_redirect off;\r\n\r\n\tinclude \/home\/container\/nginx\/mime.types;\r\n\tdefault_type application\/octet-stream;\r\n\r\n    ##\r\n\t# SSL Settings\r\n\t##\r\n\r\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\r\n\tssl_prefer_server_ciphers on;\r\n\r\n\t##\r\n\t# Logging Settings\r\n\t##\r\n\r\n    access_log \/dev\/stdout;\r\n\r\n    ##\r\n\t# Gzip Settings\r\n\t##\r\n\r\n\tgzip on;\r\n\r\n\t# gzip_vary on;\r\n\t# gzip_proxied any;\r\n\t# gzip_comp_level 6;\r\n\t# gzip_buffers 16 8k;\r\n\t# gzip_http_version 1.1;\r\n\t# gzip_types text\/plain text\/css application\/json application\/javascript text\/xml application\/xml application\/xml+rss text\/javascript;\r\n\r\n    ##\r\n\t# Virtual Host Configs\r\n\t##\r\n\r\n\tinclude \/home\/container\/nginx\/conf.d\/*.conf;\r\n\tinclude \/home\/container\/nginx\/sites-enabled\/*;\r\n}\r\n\r\n\r\n#mail {\r\n#\t# See sample authentication script at:\r\n#\t# http:\/\/wiki.nginx.org\/ImapAuthenticateWithApachePhpScript\r\n#\r\n#\t# auth_http localhost\/auth.php;\r\n#\t# pop3_capabilities \"TOP\" \"USER\";\r\n#\t# imap_capabilities \"IMAP4rev1\" \"UIDPLUS\";\r\n#\r\n#\tserver {\r\n#\t\tlisten     localhost:110;\r\n#\t\tprotocol   pop3;\r\n#\t\tproxy      on;\r\n#\t}\r\n#\r\n#\tserver {\r\n#\t\tlisten     localhost:143;\r\n#\t\tprotocol   imap;\r\n#\t\tproxy      on;\r\n#\t}\r\n#}\r\nEOF\r\n\r\n\r\n\r\n# default.conf\r\ncat > \/mnt\/server\/nginx\/sites-enabled\/default << 'EOF'\r\n##\r\n# You should look at the following URL's in order to grasp a solid understanding\r\n# of Nginx configuration files in order to fully unleash the power of Nginx.\r\n# https:\/\/www.nginx.com\/resources\/wiki\/start\/\r\n# https:\/\/www.nginx.com\/resources\/wiki\/start\/topics\/tutorials\/config_pitfalls\/\r\n# https:\/\/wiki.debian.org\/Nginx\/DirectoryStructure\r\n#\r\n# In most cases, administrators will remove this file from sites-enabled\/ and\r\n# leave it as reference inside of sites-available where it will continue to be\r\n# updated by the nginx packaging team.\r\n#\r\n# This file will automatically load configuration files provided by other\r\n# applications, such as Drupal or Wordpress. These applications will be made\r\n# available underneath a path with that package name, such as \/drupal8.\r\n#\r\n# Please see \/usr\/share\/doc\/nginx-doc\/examples\/ for more detailed examples.\r\n##\r\n\r\n# Default server configuration\r\n#\r\nserver {\r\n\tlisten 80 default_server;\r\n\tlisten [::]:80 default_server;\r\n\r\n\t# SSL configuration\r\n\t#\r\n\t# listen 443 ssl default_server;\r\n\t# listen [::]:443 ssl default_server;\r\n\t#\r\n\t# Note: You should disable gzip for SSL traffic.\r\n\t# See: https:\/\/bugs.debian.org\/773332\r\n\t#\r\n\t# Read up on ssl_ciphers to ensure a secure configuration.\r\n\t# See: https:\/\/bugs.debian.org\/765782\r\n\t#\r\n\t# Self signed certs generated by the ssl-cert package\r\n\t# Don't use them in a production server!\r\n\t#\r\n\t# include snippets\/snakeoil.conf;\r\n\r\n\troot \/home\/container\/html;\r\n\r\n\t# Add index.php to the list if you are using PHP\r\n\tindex index.html index.htm index.nginx-debian.html;\r\n\r\n\tserver_name _;\r\n\r\n\t# Print logs on console\r\n\taccess_log \/dev\/stdout;\r\n    error_log \/dev\/stdout info;\r\n    \r\n\t# Print logs to file\r\n    access_log \/home\/container\/nginx\/logs\/access.log;\r\n    error_log \/home\/container\/nginx\/logs\/error.log;\r\n\r\n\t# Disable gzip\r\n\tgzip off;\r\n\r\n\tlocation \/ {\r\n\t\t# First attempt to serve request as file, then\r\n\t\t# as directory, then fall back to displaying a 404.\r\n\t\ttry_files $uri $uri\/ =404;\r\n\t}\r\n\r\n\t# pass PHP scripts to FastCGI server\r\n\t#\r\n\t#location ~ \\.php$ {\r\n\t#\tinclude snippets\/fastcgi-php.conf;\r\n\t#\r\n\t#\t# With php-fpm (or other unix sockets):\r\n\t#\tfastcgi_pass unix:\/run\/php\/php7.4-fpm.sock;\r\n\t#\t# With php-cgi (or other tcp sockets):\r\n\t#\tfastcgi_pass 127.0.0.1:9000;\r\n\t#}\r\n\r\n\t# deny access to .htaccess files, if Apache's document root\r\n\t# concurs with nginx's one\r\n\t#\r\n\t#location ~ \/\\.ht {\r\n\t#\tdeny all;\r\n\t#}\r\n}\r\n\r\n\r\n# Virtual Host configuration for example.com\r\n#\r\n# You can move that to a different file under sites-available\/ and symlink that\r\n# to sites-enabled\/ to enable it.\r\n#\r\n#server {\r\n#\tlisten 80;\r\n#\tlisten [::]:80;\r\n#\r\n#\tserver_name example.com;\r\n#\r\n#\troot \/var\/www\/example.com;\r\n#\tindex index.html;\r\n#\r\n#\tlocation \/ {\r\n#\t\ttry_files $uri $uri\/ =404;\r\n#\t}\r\n#}\r\nEOF\r\n\r\n\r\n\r\n# Replace default\r\nsed -i \"s#^\\tlisten 80 default_server;#\\tlisten $SERVER_PORT default_server;#\" \/mnt\/server\/nginx\/sites-enabled\/default\r\nsed -i \"s#^\\tlisten \\[::\\]:80 default_server;#\\tlisten [::]:$SERVER_PORT default_server;#\" \/mnt\/server\/nginx\/sites-enabled\/default\r\nif [ -n \"$PHP_VERSION\" ]; then\r\n    sed -i '\/^\\t# pass PHP scripts to FastCGI server$\/c\\\r\n\\tlocation ~ \\.php$ {\\\r\n\\t\\tinclude \/home\/container\/nginx\/fastcgi_params;\\\r\n\\t\\tfastcgi_pass unix:\/home\/container\/fpm\/tmp\/php-fpm.sock;\\\r\n\\t\\tfastcgi_param SCRIPT_FILENAME $document_root\/$fastcgi_script_name;\\\r\n\\t}\\\r\n\\\r\n\\t# pass PHP scripts to FastCGI server' \/mnt\/server\/nginx\/sites-enabled\/default\r\nfi\r\n\r\n\r\n\r\n# cloudflare-realip.conf\r\ncat > \/mnt\/server\/nginx\/conf.d\/cloudflare-realip.conf << 'EOF'\r\nset_real_ip_from 173.245.48.0\/20;\r\nset_real_ip_from 103.21.244.0\/22;\r\nset_real_ip_from 103.22.200.0\/22;\r\nset_real_ip_from 103.31.4.0\/22;\r\nset_real_ip_from 141.101.64.0\/18;\r\nset_real_ip_from 108.162.192.0\/18;\r\nset_real_ip_from 190.93.240.0\/20;\r\nset_real_ip_from 188.114.96.0\/20;\r\nset_real_ip_from 197.234.240.0\/22;\r\nset_real_ip_from 198.41.128.0\/17;\r\nset_real_ip_from 162.158.0.0\/15;\r\nset_real_ip_from 104.16.0.0\/13;\r\nset_real_ip_from 104.24.0.0\/14;\r\nset_real_ip_from 172.64.0.0\/13;\r\nset_real_ip_from 131.0.72.0\/22;\r\n\r\nset_real_ip_from 2400:cb00::\/32;\r\nset_real_ip_from 2606:4700::\/32;\r\nset_real_ip_from 2803:f800::\/32;\r\nset_real_ip_from 2405:b500::\/32;\r\nset_real_ip_from 2405:8100::\/32;\r\nset_real_ip_from 2a06:98c0::\/29;\r\nset_real_ip_from 2c0f:f248::\/32;\r\n\r\nset_real_ip_from 172.18.0.0\/16;\r\n\r\nreal_ip_header CF-Connecting-IP;\r\nEOF\r\n\r\n\r\n\r\n# limit-req-zone.conf\r\ncat > \/mnt\/server\/nginx\/conf.d\/limit-req-zone.conf << 'EOF'\r\nlimit_req_zone $binary_remote_addr zone=mylimit:100m rate=50r\/s;\r\nlimit_req zone=mylimit burst=150 nodelay;\r\nlimit_req_status 429;\r\nEOF\r\n\r\n\r\n\r\n# index.html\r\ncat > \/mnt\/server\/html\/index.html << 'EOF'\r\nhello world!\r\nEOF",
            "container": "debian@sha256:b4aa902587c2e61ce789849cb54c332b0400fe27b1ee33af4669e1f7e7c3e22f",
            "entrypoint": "bash"
        }
    },
    "variables": []
}